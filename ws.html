<!DOCTYPE html>

<html lang="ru" >
  
<head> 
	
  <meta charset="UTF-8">	
  <title>Browser and Term</title>
   <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <link rel="stylesheet" href="css/terminal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
</head>

<body>
	
  <div class="Absolute-Center">
  <div class="display browser"></div>
  <div class="display terminal"></div>   
  <div class="svg">
    
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <defs>
                    <linearGradient id="c" x1="47.952%" x2="47.952%" y1="97.595%" y2="0%">
                      <stop stop-color="#737373" offset="0%"></stop>
                      <stop stop-color="#737373" offset="61.372%"></stop>
                      <stop stop-color="#737373" offset="100%"></stop>
                    </linearGradient>
                    <path id="a" d="M0,4.99424261 C0,2.23599858 2.2402674,0 4.99531509,0 L59.0046849,0 C61.7635213,0 64,2.22982375 64,4.99424261 L64,51.0057574 C64,53.7640014 61.7597326,56 59.0046849,56 L4.99531509,56 C2.23647875,56 0,53.7701762 0,51.0057574 L0,4.99424261 Z"></path>
                    <mask id="d" width="64" height="56" x="0" y="0" fill="white">
                      <use xlink:href="#a"></use>
                    </mask>
                    <path id="b" d="M0,4.99424261 C0,2.23599858 2.2402674,0 4.99531509,0 L59.0046849,0 C61.7635213,0 64,2.22982375 64,4.99424261 L64,51.0057574 C64,53.7640014 61.7597326,56 59.0046849,56 L4.99531509,56 C2.23647875,56 0,53.7701762 0,51.0057574 L0,4.99424261 Z"></path>
                    <mask id="e" width="64" height="56" x="0" y="0" fill="white">
                      <use xlink:href="#b"></use>
                    </mask>
                  </defs>
                  <g fill="none" fill-rule="evenodd">
                    <g transform="translate(0 4)">
                      <use fill="#FFF" stroke="url(#c)" stroke-width="6" mask="url(#d)" xlink:href="#a"></use>
                      <rect width="9.622" height="1.874" x="19.037" y="20.894" fill="#FFFFFF"></rect>
                      <polygon fill="#FFFFFF" points="9.573 9.2 5.62 7.109 8.487 0 .016 7.635 3.738 10.153 1.101 16.836" transform="translate(6.53 6.838)"></polygon>
                    </g>
                    <g transform="translate(0 4)">
                      <use fill="#FFF" stroke="url(#c)" stroke-width="6" mask="url(#e)" xlink:href="#b"></use>
                      <rect width="9.622" height="1.874" x="19.037" y="20.894" fill="#737373"></rect>
                      <polygon fill="#737373" points="9.573 9.2 5.62 7.109 8.487 0 .016 7.635 3.738 10.153 1.101 16.836" transform="translate(6.53 6.838)"></polygon>
                    </g>
                  </g>
                </svg>
    
    </div>
	  
             <chars class="ttl">        
              UI &amp; UX
                   <br>
       
             </chars>
	  
</div>
  
	
<div class="box">
  <div class="console">
    <div class="expand"></div>
    <div class="minimize"></div>
    <div class="close"></div>
  </div>
  <div class="message"><p>&gt;_ </p>
    <pre class="tbd">.screen p::after {
<script  src="mina-bach/js/rcnt.js"></script>
    <script>    
       
       
       var ws = new ReconnectingWebSocket('wss://n.block.io/');
ws.debug = false; // set to true to see messages as they appear
ws.timeout = 5400;
// have we subscribed to the events or not?
// this is just a proof of concept, not a robust implementation
var subscribed = false;
// we'll track transactions per minute aswell
var txpm = {'BTC': [], 'DOGE': [], 'LTC': []}
var coinSymbols = {'BTC': '&#3647;', 'DOGE': '&#208;', 'LTC': '&#321;'}
ws.onmessage = function(msg) {
    // whenever a new message appears, this executes
    msg = JSON.parse(msg.data);
    
    // a new transaction! let's process the data
    if (msg.type == 'new-transactions') { addRowToTable(msg.data); }
    
    if (!subscribed && msg.status == 'success')  {
	// we haven't subscribed yet, and the Notifications server just welcomed us
	subscribed = true;
	subscribeToNewTransactions('BTC'); // bitcoin
	subscribeToNewTransactions('DOGE'); // dogecoin
	subscribeToNewTransactions('LTC'); // litecoin
    }
    
}
function addToTxpm(network) {
    // adds to Transactions per Minute array
    // return Transactions per Minute for given data's network
    
    var curTime = Math.floor(Date.now() / 1000.0);
    var maxTimeOffset = 10*60; // aggregate data over ten minutes, max
    
    txpm[network].push(curTime);
    
    var minTime = curTime - maxTimeOffset;
    
    while (txpm[network][0] < minTime) {
	txpm[network].pop();
    }
    
    var curTxpm = ((txpm[network].length / (curTime - txpm[network][0] + 1)) * 60).toFixed(2);
    
    if (txpm[network].length < 100) { curTxpm = 'gathering data...'; }
    
    $('#txpm-'+network).text(' (Tx/min = ' + curTxpm + ')');
    
    return curTxpm;
}
function subscribeToNewTransactions(network) {
    // send the appropriate JSON string to subscribe to a network's new tx stream
    ws.send(JSON.stringify({'type':'new-transactions','network':network}));
    
}
function addRowToTable(data) {
    // let's add the new transaction to its network's new-transactions table
    var network = data.network;
    
    var sumSent = 0.0; // don't do this, use a BigNumber instead
    
    for (i = 0; i < data.inputs.length; i++) {
	sumSent += parseFloat(data.inputs[i].amount);
    }
    
    
    // add the transaction row to the appropriate table
    $('#bucket-'+network+' tr:first').before('<tr><td><a href="https://chain.so/tx/'+network+'/'+data.txid+'" target=_blank>'+data.txid.substring(0,8)+'...</a></td><td>'+sumSent.toFixed(4)+' '+coinSymbols[network]+'</td></tr>');
    
    $('#bucket-'+network).find('tr:gt(10)').remove(); // keep the first 10 rows, remove the rest
    
    addToTxpm(data.network); // update transactions per minute data
    
    
}
                 </script>
       }        </pre>

	      </div>
             </div>    
            </body>
           </html>
